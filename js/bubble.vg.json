{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "data": {
      "url": "https://raw.githubusercontent.com/GuyDavis1/Week-9-Homework/main/data/suburb_overall.csv"
    },
    "width": 275,
    "height": 200,
    "config": {"background":null},
    "params": [
      {"name":"property_type",  
      "bind":
      { "input":"select",
      "options":[null,"U","H"],"labels":["all","units","houses"], "name":"Property Type Selection:"}
    }],
    "transform": [
        {"calculate": "100  * datum.yield","as":"rental_yield"},
        {"calculate": "toString(round(1000  * datum.yield)/10)+'%'","as":"ry"},
        {"filter":"property_type==null||datum.ptype==property_type"},
        {"filter":"datum.price<2200000"},
        {"calculate": "if(datum.ptype=='U','Unit','House')", "as":"prop_type"},
        {"calculate": "round(datum.Count)", "as":"cc"}
    ],
    "mark": {
      "type": "circle",
      "opacity": 0.8,
      "stroke": "black",
      "strokeWidth": 1
    },
    "encoding": {
      "color": {"field": "prop_type", "type": "nominal","title":"Property Type","scale":
        {"domain":["House","Unit"],"range":["#17A69F","#E61919"]}},
      
      "x": {
        "field": "price",
        "type": "quantitative",
        "axis": {"grid": false},
        
        "scale": {"domainMax":2200000,"domainMin":100000}
      },
      "y": {"field": "rental_yield", "type": "quantitative", "axis": {"labelExpr": "datum.label + '%'"},
      "scale":{"domainMax":8,"domainMin":0},
        "title":"rental yield"},
      "size": {
        "field": "Count",
        "type": "quantitative",
        "title": "Count of investment properties",
        "legend": null,
        "scale": {"rangeMax": 500}
      },
   
      "tooltip":[
          {"field":"suburb","type":"nominal","title":"Suburb"},
          {"field":"prop_type","type":"nominal","title":"Property Type"},
          {"field":"ry","type":"nominal","title":"Rental Yield"},
          {"field":"price","type":"quantitative","title":"Median Price"},
          {"field":"cc","type":"quantitative","title":"Count of Investment Properties"}
      ]
    }
  }