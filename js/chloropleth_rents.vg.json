{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "title": "2021 Median Melburne Rent Map by Suburb",
    "width": 250,
    "height": 175,
    "config": {"background":null},
        "params": [
          {
            "name": "zoom_level",
            "value": 15000,
            "bind": {
            "input": "range",
            "min": 12000,
            "max": 30000,
            "step": 100,
            "name": "Zoom: "
            }},
      {"name":"property_type",
      
    
      "bind":
      
      { "input":"select",
      
      "options":[null,"unit"],"labels":["house","unit"], "name":"Property Type Selection:"}
    }
    ],
    "layer" : [ {
      
      
      
      
   
      "data": {
        "url": "https://raw.githubusercontent.com/GuyDavis1/Week-9-Homework/main/data/output_smol.topojson",
        "format": {
              "type": "topojson",
              "feature": "vic_localities"
            }
      }, 
      "projection": {
        "type": "conicEqualArea",
        "parallels":[144,-37.9],
        "center": [145,-37.9],
        "scale":{"expr":"zoom_level"}
        
     
      },
      "mark": {"type": "geoshape","fill": "#EEEEEE","stroke": "#EEEEEE"}
  
  
    },
      {"data": {
      "url": "https://raw.githubusercontent.com/GuyDavis1/Week-9-Homework/main/data/output_smol.topojson",
      "format": {
            "type": "topojson",
            "feature": "vic_localities"
          }
    },
    "transform": [
      {
        "lookup": "properties.LOC_NAME",
        "from": {
          "data": {
            "url": "https://raw.githubusercontent.com/GuyDavis1/Week-9-Homework/main/data/house_rents_full.csv"
          },
          "key": "suburb",
          "fields": ["median_rent"]
        }
      },
      {"calculate": "datum.median_rent", "as": "median rent"},
      {"calculate":"if(property_type==null,'House','something broke')", "as":"ptype"},
      
      {"filter":"property_type==null"}
    ],
    "projection": {
      "type": "conicEqualArea",
  
      "parallels":[144,-37.9],
      "center": [145,-37.9],
      
      "scale":{"expr":"zoom_level"}
    },
  
    "mark": {
      "type": "geoshape","stroke": "#000000"},
    
      
    "encoding": {
      "color": {
        "field": "median rent",
        
        "type": "quantitative",
        "scale":{"domain":[300,1000],
        "range":["#0d0887","#9c179e","#ed7953","#f0f921","#f0f921"]
        }
      },
      "tooltip": [
        {"field": "properties.LOC_NAME", "type": "nominal", "title": "suburb"},
        {"field": "median_rent", "type": "quantitative","title":"median price"},
        {"field": "ptype", "type": "nominal","title":"property type"}
      ]
    }
  },
  {"data": {
    "url": "https://raw.githubusercontent.com/GuyDavis1/Week-9-Homework/main/data/output_smol.topojson",
    "format": {
          "type": "topojson",
          "feature": "vic_localities"
        }
  },
  "transform": [
    {
      "lookup": "properties.LOC_NAME",
      "from": {
        "data": {
          "url": "https://raw.githubusercontent.com/GuyDavis1/Week-9-Homework/main/data/unit_rents_full.csv"
        },
        "key": "suburb",
        "fields": ["median_rent"]
      }
    },
    {"calculate": "datum.median_rent", "as": "median rent"},
    {"calculate":"if(property_type=='unit','House','something broke')", "as":"ptype"},
      
    {"filter":"property_type=='unit'"}
  ],
  "projection": {
    "type": "conicEqualArea",
  
    "parallels":[144,-37.9],
    "center": [145,-37.9],
    
    "scale":{"expr":"zoom_level"}
  },
  
  "mark": {
    "type": "geoshape","stroke": "#000000"},
  
    
  "encoding": {
    "color": {
      "field": "median rent",
      
      "type": "quantitative",
      "scale":{"domain":[300,1000],
      "range":["#0d0887","#9c179e","#ed7953","#f0f921"]
      }
    },
    "tooltip": [
      {"field": "properties.LOC_NAME", "type": "nominal", "title": "suburb"},
      {"field": "median_rent", "type": "quantitative","title":"median price"},
      {"field": "ptype", "type": "nominal","title":"property type"}
    ]
  }
  }
    ]
  }
  